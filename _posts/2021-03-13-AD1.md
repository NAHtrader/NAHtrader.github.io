---
title: "돈키언 채널(Donchian Channel)" (작성중)
excerpt: "책『터틀의 방식』에 등장하는 추세추종 트레이딩 전략"

categories:
  - Position
tags:
  - [Algorithm Trading]

toc: true
toc_sticky: true

date: 2021-03-16
last_modified_at: 2021-03-16
---

## Prelude : 추세 추종 전략이란?
`추세 추종 전략`이란 차트 상의 데이터를 가지고 주가의 이동 방향에 대해 판단해 진입하는 트레이딩 방법 중 하나다. 주가가 중장기적인 저항대를 뚫고 올라갈 때 매수에 동참해 추세가 꺾일 때까지 보유하는 중장기적인 트레이딩 전략이다. 이 전략의 핵심은 비쌀 때 사서, 더 비싸지기를 기다리는 것이라고 할 수 있다. 

`추세 추종 전략의 단점`은 시장의 $\frac{2}{3}$ 이상은 추세적이지 않다는 것이다. 즉, 이 전략의 핵심은 오르면 떨어지고, 떨어지면 다시 반등하는 횡보장의 리스크를 어떻게 처리해주냐에 달려있다. 따라서, 장기 추세 추종 전략의 경우, 한 번 트레이딩에서 큰 수익을 얻어 전체적인 수익을 챙기는 방향으로 전략을 구사해야한다.  
(일반적으로 `추세 추종 전략`의 승률은 `30%`대로 상당히 낮은 편이다)

## 1. 돈키언 채널
**정의**
일정 기간 N 동안의 고점의 최대값을 상선, 저점의 최소값을 하선으로 그린 지표다. 

**코드**
**기본 구조** 
  - `시간 t의 돈키언 채널값` : 시간 t에서 `t-N`에서 `t-1`까지의 데이터 사용

**a. 반복문을 활용한 함수 정의** 
```python
def donchian_max(df,t,N):   # t 는 시점 (건들지 말 것!)
  max=df.iloc[(t-N),2]      # N은 기간 (N을 조정할 것!)
  for i in range(1,N):
      if df.iloc[(t-N+i),2] >= max:
          max = df.iloc[(t - N + i), 2]
  return max

def donchian_min(df,t,N):
  min=df.iloc[(t-N),3]
  for i in range(1,N):
      if df.iloc[(t-N+i),3] <= min:
        min = df.iloc[(t-N+i),3]
  return min
```
**b. List에 담아서 Max / min 함수 처리하기** 

```python
def donchian_max(df,t,N):   # t 는 시점 (건들지 말 것!)
  box=[]    # N은 기간 (N을 조정할 것!)
  max_value=0
  for i in range(0,N):
    box.append(df.iloc[(t-N+i),2])
  max_value=max(box)
  return max_value

def donchian_min(df,t,N):
  box=[]
  min_value=0
  for i in range(0,N):
      box.append(df.iloc[(t-N+i),3])
  min_value=min(box)
  return min_value
```

**연산 속도 비교 결과**  

`Bitcoin 2월 1분봉` 데이터를 가지고 10회 연산 평균값  
1분봉 캔들 데이터를 가지고 1달 `Back Testing`을 할 경우 걸리는 시간

  - a : 21.84초 / 1회
  - b : 18.22초 / 1회

## 2. 돈키언 채널 돌파

여기에 이 내용을 쓸 지 아니면 백테스팅 내용에 추가할지 고민...